!function(t){function a(a,o,r,e){t.postdata(a,o,r,function(o){t.when(t("[data-products_block]").html(o)).done(function(){e&&e.call(a)})})}function o(){t("body").waitloader("show");var o=t("[data-products_get_list]").val(),r=t("[data-products_block] form[data-search]"),e=new FormData;r.length&&new FormData(r[0]).forEach(function(t,a){e.append(a,t)}),a(this,o,e,function(){t("body").init_input(),t("body").waitloader("remove"),t.danger_remove(3e3)})}t(document).off(".search_action"),t(document).on("change","[data-clearance_chk]",function(a){a.preventDefault(),a.stopPropagation(),t("body").waitloader("show");var r=t(this).attr("data-action"),e=new FormData,n=t("[data-products_block] form[data-search]");if(n.length&&new FormData(n[0]).forEach(function(t,a){e.append(a,t)}),this.checked){e.append("pid",t(this).attr("data-pid"));var c=function(a){t.when(t("[data-role=form_content]").html(a)).done(function(){o()})}}else c=function(a){t("[data-products_block]").html(a),t("body").waitloader("remove")};t.postdata(this,r,e,c,!1)}),t(document).on("submit.search_action","[data-products_block] form[data-search]",function(o,r){if(o.stopPropagation(),o.preventDefault(),r){(e=new FormData).append("search[reset]",!0)}else var e=new FormData(this);var n=t("[data-products_block] form[data-sort]");n.length&&new FormData(n[0]).forEach(function(t,a){e.append(a,t)}),a(this,t(this).attr("action"),e)}),t(document).on("click.search_action","[data-products_block] form[data-search] [data-search_reset]",function(a){a.preventDefault(),a.stopPropagation(),t("[data-products_block] form[data-search]").trigger("submit",[!0])}),t(document).on("click.search_action","[data-products_block] form[data-search] [data-search_submit]",function(a){a.preventDefault(),a.stopPropagation(),t("[data-products_block] form[data-search]").trigger("submit")}),t(document).on("click.search_action","[data-products_block] [data-to_page]",function(o){o.preventDefault(),o.stopPropagation();var r=t("[data-products_block] form[data-search]");if(r.length)r.attr("action",t(this).attr("href")).trigger("submit");else{var e=new FormData,n=t("[data-products_block] form[data-sort]");n.length&&new FormData(n[0]).forEach(function(t,a){e.append(a,t)}),a(this,t(this).attr("href"),e)}}),t(document).on("click.search_action","[data-products_block] [data-sort]",function(o){o.preventDefault(),o.stopPropagation();var r=t("[data-products_block] form[data-search]");if(r.length)r.attr("action",t(this).attr("href")).trigger("submit");else{var e=new FormData,n=t("[data-products_block] form[data-sort]");n.length&&new FormData(n[0]).forEach(function(t,a){e.append(a,t)}),a(this,t(this).attr("href"),e)}}),o(),t.change_button_text()}(jQuery);