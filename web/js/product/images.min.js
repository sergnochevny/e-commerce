"use strict";!function(e){function i(){return{init:void e(window).on("resize",function(){var i=e(".b_modify_images_main_pic"),o=e(".b_modify_images_pic");i.height(i.width()-160+"px"),o.height(o.width()-180+"px")}).trigger("resize")}}function o(i,o,n,t,a){e("body").waitloader("show"),e.ajax({type:"POST",url:o,data:n,cache:!1,processData:!1,contentType:!1,success:function(o){void 0!==t&&null!==t?e.when(e(t[0]).html(o)).done(function(){a&&a.call(i,o),e("body").waitloader("remove")}):(a&&a.call(i,o),e("body").waitloader("remove"))},error:function(i,o){alert("Error: "+i.responseCode),e("body").waitloader("remove")}})}var n=e("#status");new i;e(document).on("click",".b_modify_images_pic_main_icon",function(n){n.preventDefault();var t=new FormData(e("form#edit_form")[0]),a=e("form#edit_form").attr("action");t.append("method","images.main"),t.append("idx",e(this).attr("data-img_idx")),o(this,a,t,e("#images"),function(){new i})}),e(document).on("click.confirm_action",".popup a.close",function(i){e("#confirm_action").off("click.confirm_action"),e("#confirm_dialog").removeClass("overlay_display")}),e(document).on("click.confirm_action","#confirm_no",function(i){e(".popup a.close").trigger("click")}),e(document).on("click","a.pic_del_images",function(n){if(n.preventDefault(),!e(this).is(".disabled")){var t=e(this).attr("data-img_idx");e("#confirm_action").on("click.confirm_action",function(n){e("body").waitloader("show"),n.preventDefault(),e("#confirm_dialog").removeClass("overlay_display");var a=new FormData(e("form#edit_form")[0]),c=e("form#edit_form").attr("action");a.append("method","images.delete"),a.append("idx",t),o(this,c,a,e("#images"),function(){new i}),e("#confirm_action").off("click.confirm_action"),e("body").waitloader("remove")}),e("#confirm_dialog").addClass("overlay_display")}}),e(document).on("click","#upload",function(i){i.preventDefault(),e("#uploadfile").trigger("click")}),e(document).on("change","#uploadfile",function(t){t.preventDefault();var a=function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e.toLowerCase()):""}(function(e){return e.replace(/.*(\/|\\)/,"")}(this.value));if(a&&/^(jpg|png|jpeg|gif)$/.test(a)){var c=new FormData(e("form#edit_form")[0]),r=e("form#edit_form").attr("action");c.append("method","images.upload"),c.append("idx",e("input[name=images]:checked").val()?e("input[name=images]:checked").val():1),o(this,r,c,e("#images"),function(){new i})}else n.text("Error format")})}(jQuery);