!function(t){var a=t("#base_url").val();t(document).on("change","input[data-role=quantity]",function(o){o.preventDefault();var e=t(this).val(),n=a+"cart/change_product",c=t(this).parents("[data-block=cart_item]").attr("data-pid"),i=t(this).parents("[data-block=cart_item]");t("body").waitloader("show"),t.get(n,{pid:c,qnt:e},function(o){var e=JSON.parse(o);e.product&&(t(document).trigger("destroy_spinner"),t.when(t(i).replaceWith(e.product)).done(function(){t(document).trigger("init_spinner"),t("body").waitloader("remove"),t("[data-block=subtotal_items]").load(a+"cart/items_amount"),t("[data-block=subtotal]").load(a+"cart/amount"),t(document).trigger("calc_shipping_total")})),e.msg&&t.when(t(e.msg).appendTo(".main-content")).done(function(){t("#modal").modal("show"),t("#modal").on("hidden.bs.modal",function(){t(this).remove()})})})}),t(document).on("click.confirm_action",".popup a.close",function(a){t("#confirm_action").off("click.confirm_action"),t("#confirm_dialog").removeClass("overlay_display")}),t(document).on("click.confirm_action","#confirm_no",function(a){t(".popup a.close").trigger("click")}),t(document).on("click","[data-block=del_product_cart]",function(o){o.preventDefault();var e=t(this).attr("href"),n=t(this).parents("[data-block=cart_item]").attr("data-pid"),c=t(this).parents("[data-block=cart_item]");t(c).find("input[data-role=quantity]");t("#confirm_action").on("click.confirm_action",function(o){o.preventDefault(),t.get(e,{pid:n},function(o){t.when(t(document).trigger("destroy_spinner")).done(function(){t.when(t(c).remove()).done(function(){t("[data-row=items]").length>0?(t(document).trigger("init_spinner"),t("[data-block=subtotal_items]").load(a+"cart/items_amount")):(t("[data-block=row_subtotal]").remove(),t("[data-block=row_subtotal_items]").remove(),t("[data-block=coupon_section]").remove(),t("[data-block=products-cart-list]").remove(),t("[data-row=samples]").length>0&&(t("[data-block=subtotal_samples_items]").load(a+"cart/samples_amount"),t("[data-block=samples_legend]").load(a+"cart/samples_legend"))),t("[data-row=items]").length>0||t("[data-row=samples]").length>0?t("[data-block=subtotal]").load(a+"cart/amount"):t(document).trigger("remove_inputs"),t(document).trigger("calc_shipping_total"),t("#confirm_dialog").removeClass("overlay_display"),t("#confirm_action").off("click.confirm_action")})})})}),t("#confirm_dialog").addClass("overlay_display")}),t(document).on("click","[data-block=del_sample_cart]",function(o){o.preventDefault();var e=t(this).attr("href"),n=t(this).parents("[data-block=sample_item]").attr("data-pid"),c=t(this).parents("[data-block=sample_item]");t("#confirm_action").on("click.confirm_action",function(o){o.preventDefault(),t.get(e,{pid:n},function(o){t.when(t(c).remove()).done(function(){t("[data-row=samples]").length>0?t("[data-block=subtotal_samples_items]").load(a+"cart/samples_amount"):(t("[data-block=row_subtotal]").remove(),t("[data-block=row_subtotal_samples]").remove(),t("[data-block=samples_legend]").remove(),t("[data-block=samples_table]").remove()),t("[data-row=items]").length>0||t("[data-row=samples]").length>0?t("[data-block=subtotal]").load(a+"cart/amount"):t(document).trigger("remove_inputs"),t(document).trigger("calc_shipping_total"),t("#confirm_dialog").removeClass("overlay_display"),t("#confirm_action").off("click.confirm_action")})})}),t("#confirm_dialog").addClass("overlay_display")}),t(document).on("remove_inputs",function(){t("[data-block=div_subtotal_table]").remove(),t("[data-block=products-cart-list]").remove(),t("[data-block=proceed_button]").remove(),t("[data-block=coupon_section]").remove(),t(".page-title").text("Your cart is empty, yet..."),t(".cont-shop").text("Go shopping")}),t(document).on("init_spinner",function(){t("input[data-role=quantity]").each(function(a){1==t(this).attr("data-whole")?t(this).spinner({max:1e6,min:1,spin:function(a,o){t(this).val(o.value),t(this).trigger("change")}}):t(this).spinner({max:1e6,min:1,step:.05,numberFormat:"n",spin:function(a,o){t(this).val(o.value).trigger("change")}})})}),t(document).on("destroy_spinner",function(){t("input[data-role=quantity]").each(function(a){t(this).spinner("destroy")})}),t(document).ready(function(a){t(this).trigger("init_spinner")}),t(document).on("calc_shipping_total",function(){var o=a+"cart/shipping_calc",e=a+"cart/get_subtotal_ship",n=new FormData;if(t("[data-block=select_ship]").length>0){var c="";t("[data-block=coupon_code]").length>0&&(c=t("[data-block=coupon_code]").val());var i=t("[data-block=select_ship]").val(),l=0;t("[data-block=roll]").length>0&&(l=t("[data-block=roll]")[0].checked?1:0),n.append("ship",i),n.append("roll",l),n.append("coupon",c)}t("[data-block=express_samples]").length>0&&n.append("express_samples",t("[data-block=express_samples]")[0].checked?1:0),t.postdata(this,o,n,function(a){t("[data-block=shipping]").html(a),t("[data-block=subtotal_ship]").load(e),t(document).trigger("calc_total")})}),t(document).on("calc_total",function(){var o=a+"cart/coupon_total_calc",e=new FormData;e.append("emty",!0),t.postdata(this,o,e,function(a){t("[data-block=coupon_total]").html(a)})}),t(document).on("change","[data-block=select_ship]",function(a){t(document).trigger("calc_shipping_total")}),t(document).on("change","[data-block=roll]",function(a){t(document).trigger("calc_shipping_total")}),t(document).on("change","[data-block=express_samples]",function(a){t(document).trigger("calc_shipping_total")}),t(document).on("click","[data-block=apply_coupon]",function(a){t(document).trigger("calc_shipping_total")}),t(document).on("click","[data-block=proceed_button]",function(a){a.preventDefault();var o=t(this).attr("href");t.get(o,{},function(a){t.when(t("#content").html(a)).done(function(){t("html, body").stop().animate({scrollTop:0},1e3)})})}),t(document).on("click","[data-block=proceed_agreem_button]",function(a){a.preventDefault();var o=t(this).attr("href");t.get(o,{},function(a){t.when(t("#content").html(a)).done(function(){t("html, body").stop().animate({scrollTop:0},1e3)})})}),t(document).on("change","[data-block=agreeterm]",function(a){t("[data-block=container_proceed_pay]").toggle(this.checked)}),t(document).on("submit","[data-block=paypal_form]",function(o){var e=a+"cart/pay_mail";t("body").waitloader("show"),t.get(e)})}(jQuery);